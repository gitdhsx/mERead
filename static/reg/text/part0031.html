<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>学习正则表达式 (图灵程序设计丛书)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre" id="TI1E0-13f7b649a4a84a279903cc97504f6ac8">
<p id="filepos72820" class="calibre20"><span class="calibre8"><span class="bold">2.6 再谈匹配任意字符</span></span></p>
<p class="calibre1">用正则表达式匹配<span class="bold">任意</span>字符的一种方法就是使用点号（U+002E）。点号可以匹配除行结束符之外的所有字符，个别情况除外。</p>
<p class="calibre1">在RegExr中，去掉对global复选框的勾选。这样，任何正则表达式都会匹配目标文本中第一个匹配项。</p>
<p class="calibre1">在RegExr上方的文本框中键入单个点号来匹配任意字符。</p>
<p class="calibre1">如图2-6所示，点号匹配了目标文本中的第一个字符T。</p>
<p class="calibre1"><img class="calibre26" src="../images/00012.jpeg"/><span class="bold">图2-6 在RegExr中用</span><tt class="calibre19"><span class="bold">.</span></tt><span class="bold">匹配单个字符</span></p>
<p class="calibre1">要匹配THE RIME整个短语，则可使用八个点号：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">........<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">但这种方法太麻烦，所以推荐用量词：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">.{8}<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">这个表达式就能匹配前两个单词以及它们之间的空格，但只是<span class="bold">粗略地</span>匹配。勾选global旁的复选框，看看这个表达式还有什么作用，你就知道我所说的<span class="bold">粗略</span>是什么意思了。它匹配了连续多组的八个字符，头尾相连，只有目标文本的最后几个字符除外。</p>
<p class="calibre1">下面我们再试试匹配单词的边界和字母的开始和结束位置。在RegExr上方文本框中键入以下内容，可以看到细微的差异：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">\bA.{5}T\b<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">这个表达式有更强的特指性（请记住<span class="bold">特指性</span>，specificity，这个概念很重要），它匹配单词ANCYENT，也就是ancient的老写形式。这是如何做到的呢？</p>
<div class="calibre13"> </div>
<ul class="calibre14"><li class="calibre15" value="1">简写式<tt class="calibre19">\b</tt>匹配单词边界，不消耗任何字符；</li><li class="calibre15" value="2">字符A和T限定了字符序列的首尾字母；</li><li class="calibre15" value="3"><tt class="calibre19">.{5}</tt>匹配任意五个字符；</li><li class="calibre15" value="4">简写式<tt class="calibre19">\b</tt>匹配单词的另一个边界。 </li></ul>
<p class="calibre1">这个正则表达式实际上可以匹配ANCYENT和ANCIENT。</p>
<p class="calibre1">现在再试一下这个简写式：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">\b\w{7}\b<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">最后再试试匹配零个或多个字符：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">.*<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">它就相当于：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">[^\n]<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">或</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">[^\n\r]<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">类似地，点号也可以与表示“一个或多个”的量词（+）连用：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">.+<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">请在RegExr中尝试这些表达式，它们都会匹配第一行内容（在取消勾选global复选框的情况下）。原因是点号通常不会匹配折行符，例如换行符（U+000A）或回车符（U+000D）。勾选dotall旁边的复选框，然后<tt class="calibre19">.*</tt>和<tt class="calibre19">.+</tt>就会匹配下方文本框中的<span class="bold">全部</span>文本。（dotall表示点号匹配包括换行符在内的所有字符。）</p>
<p class="calibre1">这就涉及量词的<span class="bold">贪心</span>特性了。所谓“贪心”（greedy），指量词会匹配所有能匹配的字符。别急，第7章会详细介绍量词及其贪心特性。</p>
<div class="mbppagebreak" id="calibre_pb_31"></div>
</body></html>
