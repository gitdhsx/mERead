<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>学习正则表达式 (图灵程序设计丛书)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre" id="1CQAE0-13f7b649a4a84a279903cc97504f6ac8">
<p id="filepos138919" class="calibre20"><span class="calibre8"><span class="bold">4.4 非捕获分组</span></span></p>
<p class="calibre1">还有一种分组是<span class="bold">非捕获分组</span>（Non-Capturing Group）。非捕获分组不会将其内容存储在内存中。在你并不想引用分组的时候，可以使用它。由于不存储内容，非捕获分组就会带来较高的性能，而运行本书的简单示例很难察觉到性能的提升。</p>
<p class="calibre1">还记得本章中讨论的第一个分组吗？就是这个：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(the|The|THE)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">你不需要任何后向引用，因此可以这样写一个非捕获分组：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(?:the|The|THE)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">回到本章开头，你可以添加选项将其变为不区分大小写的模式，就像这样：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(?i)(?:the)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">或者你也可以这样做：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(?:(?i)the)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">不过，下面这种写法最值得推荐：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(?i:the)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">该选项<tt class="calibre19">i</tt>可以放在问号和冒号之间。</p>
<p id="filepos140415" class="calibre1"><span class="calibre38"><span class="bold">原子分组</span></span></p>
<p class="calibre1">另一种非捕获分组是<span class="bold">原子分组</span>（atomic group）。如果你使用的正则表达式引擎进行回溯操作，这种分组就可以将回溯操作关闭，但它只针对原子分组内的部分，而不针对整个正则表达式。其语法如下：</p>
<blockquote class="calibre12"><span class="calibre18"><tt class="calibre19">(?&gt;the)<br class="calibre16"/></tt></span></blockquote>
<p class="calibre20">什么时候你会想使用原子分组呢？正则表达式处理过程缓慢的一个因素就是回溯操作。其原因就是回溯操作会尝试每一种可能性，这会消耗时间和计算资源。有时它会占用大量时间。回溯有可能产生巨大的负面效应，这被称为<span class="bold">灾难性回溯</span>。</p>
<p class="calibre1">使用像re2（<a href="http://code.google.com/p/re2/">http://code.google.com/p/re2/</a>）这样的非回溯引擎可彻底关闭回溯操作，而使用原子分组可以关闭正则表达式的部分回溯操作。</p>
<blockquote class="calibre12">本书的重点是介绍语法，不讨论性能调优问题。在我看来，原子分组主要与性能相关。</blockquote>
<p class="calibre1">接下来第5章我们学习字符组。</p>
<div class="mbppagebreak" id="calibre_pb_47"></div>
</body></html>
